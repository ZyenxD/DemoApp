(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{WLUK:function(e,t,n){"use strict";n.r(t);var i=n("8Y7J"),c=n("SVse"),s=n("iInd"),r=n("HDdC");function o(e,t){return new r.a(t?n=>t.schedule(d,0,{error:e,subscriber:n}):t=>t.error(e))}function d({error:e,subscriber:t}){t.error(e)}var u=n("XNiG"),l=n("quSY");class h extends l.a{constructor(e,t){super()}schedule(e,t=0){return this}}class a extends h{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n=!1,i=void 0;try{this.work(e)}catch(c){n=!0,i=!!c&&c||new Error(c)}if(n)return this.unsubscribe(),i}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}class p extends a{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}const f=function(){class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=(()=>Date.now()),e}();class b extends f{constructor(e,t=f.now){super(e,()=>b.delegate&&b.delegate!==this?b.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return b.delegate&&b.delegate!==this?b.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}class g extends b{}const m=new g(p);var w,v=n("7o/Q"),P=n("EY2u"),_=n("LRne");!function(e){e.NEXT="N",e.ERROR="E",e.COMPLETE="C"}(w||(w={}));const C=function(){class e{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return Object(_.a)(this.value);case"E":return o(this.error);case"C":return Object(P.b)()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}static createError(t){return new e("E",void 0,t)}static createComplete(){return e.completeNotification}}return e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}();class I extends v.a{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(I.dispatch,this.delay,new O(e,this.destination)))}_next(e){this.scheduleMessage(C.createNext(e))}_error(e){this.scheduleMessage(C.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(C.createComplete()),this.unsubscribe()}}class O{constructor(e,t){this.notification=e,this.destination=t}}var x=n("9ppp"),M=n("Ylt2");class k extends u.a{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift(),super.next(e)}nextTimeWindow(e){this._events.push(new y(this._getNow(),e)),this._trimBufferThenGetEvents(),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,c=n.length;let s;if(this.closed)throw new x.a;if(this.isStopped||this.hasError?s=l.a.EMPTY:(this.observers.push(e),s=new M.a(this,e)),i&&e.add(e=new I(e,i)),t)for(let r=0;r<c&&!e.closed;r++)e.next(n[r]);else for(let r=0;r<c&&!e.closed;r++)e.next(n[r].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||m).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,i=this._events,c=i.length;let s=0;for(;s<c&&!(e-i[s].time<n);)s++;return c>t&&(s=Math.max(s,c-t)),s>0&&i.splice(0,s),i}}class y{constructor(e,t){this.time=e,this.value=t}}var E=n("JIr8"),N=n("5+tZ"),S=n("SxV6"),T=n("IheW");class K{constructor(e){this.httpClient=e,this.baseUrl="http://storerestservice.azurewebsites.net/api/products/"}getProducts(){return this.products$||(this.products$=this.httpClient.get(this.baseUrl).pipe(function(e,t,n){let i;return i={bufferSize:void 0,windowTime:void 0,refCount:!1,scheduler:void 0},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:i}){let c,s,r=0,o=!1,d=!1;return function(u){r++,c&&!o||(o=!1,c=new k(e,t,i),s=u.subscribe({next(e){c.next(e)},error(e){o=!0,c.error(e)},complete(){d=!0,c.complete()}}));const l=c.subscribe(this);this.add(()=>{r--,l.unsubscribe(),s&&!d&&n&&0===r&&(s.unsubscribe(),s=void 0,c=void 0)})}}(i))}(),Object(E.a)(this.handleError))),this.products$}getProductById(e){return this.getProducts().pipe(Object(N.a)(e=>e),Object(S.a)(t=>t.id===e),Object(E.a)(this.handleError))}clearCache(){this.products$=null}handleError(e){let t;return t=e.error instanceof Error?"An error occurred:"+e.error.message:`Backend returned code ${e.status}, body was: ${e.error}`,console.error(t),o(t)}}K.ngInjectableDef=i.Cb({token:K,factory:function(e){return new(e||K)(i.Vb(T.a))},providedIn:"root"});const Q=["loading",""],D=["class","products",4,"ngIf","ngIfElse"],Y=[3,"disabled","click"];function A(e,t){1&e&&(i.Qb(0,"h2"),i.oc(1," LOADING PRODUCTS.... "),i.Kb())}const z=[1,"products"],V=[3,"discontinued","selected","click",4,"ngFor","ngForOf"],X=[3,"click"],$=[1,"name"],j=[1,"description"],F=[1,"price"],G=["discontinued","selected"];function W(e,t){if(1&e){const e=i.Tb();i.Qb(0,"li",X),i.Rb(G),i.Yb("click",function(n){i.ic(e);const c=t.$implicit;return i.ac(2).onSelect(c)}),i.Qb(1,"span",$),i.oc(2),i.bc(3,"uppercase"),i.Kb(),i.Qb(4,"span",j),i.oc(5),i.Kb(),i.Qb(6,"span",F),i.oc(7),i.bc(8,"currency"),i.Kb(),i.Kb()}if(2&e){const e=t.$implicit,n=i.ac(2);i.Jb(0,0,e.discontinued),i.Jb(0,1,e.name==(null==n.selectedProduct?null:n.selectedProduct.name)),i.Sb(0),i.kc(2),i.pc(2,i.Xb("",i.cc(3,3,e.name),"")),i.kc(5),i.pc(5,i.Xb("",e.description,"")),i.kc(7),i.pc(7,i.Xb("",i.ec(8,5,e.price,"DOP","symbol-narrow",".2"),""))}}function U(e,t){if(1&e&&(i.Qb(0,"ul",z),i.mc(1,W,9,10,"li",V),i.bc(2,"slice"),i.Kb()),2&e){const e=t.ngIf,n=i.ac();i.kc(1),i.fc("ngForOf",i.dc(2,1,e,n.start,n.end))}}class B{constructor(e,t){this.productService=e,this.router=t,this.title="products",this.pageSize=5,this.start=0,this.end=this.pageSize,this.currentPage=1}ngOnInit(){this.products$=this.productService.getProducts()}onSelect(e){this.selectedProduct=e,this.router.navigateByUrl("/products/"+e.id)}nextPage(){this.start+=this.pageSize,this.end+=this.pageSize,this.selectedProduct=null,this.currentPage++}prevPage(){this.start-=this.pageSize,this.end-=this.pageSize,this.selectedProduct=null,this.currentPage--}}B.ngComponentDef=i.Ab({type:B,selectors:[["app-product-list"]],factory:function(e){return new(e||B)(i.Gb(K),i.Gb(s.b))},consts:14,vars:10,template:function(e,t){if(1&e&&(i.Qb(0,"h2"),i.oc(1),i.Kb(),i.mc(2,A,2,0,"ng-template",null,Q,i.nc),i.mc(4,U,3,5,"ul",D),i.bc(5,"async"),i.Qb(6,"div"),i.Qb(7,"button",Y),i.Yb("click",function(e){return t.prevPage()}),i.oc(8,"Previos Page"),i.Kb(),i.oc(9),i.Qb(10,"button",Y),i.Yb("click",function(e){return t.nextPage()}),i.bc(11,"async"),i.oc(12,"Next Page"),i.Kb(),i.Hb(13,"div"),i.Kb()),2&e){const e=i.hc(3);var n;const c=(null==(n=i.cc(11,8,t.products$))?null:n.length)<=t.end;i.kc(1),i.pc(1,i.Xb(" ",t.title,"\n")),i.kc(4),i.fc("ngIf",i.cc(5,6,t.products$)),i.fc("ngIfElse",e),i.kc(7),i.fc("disabled",0==t.start),i.kc(9),i.pc(9,i.Xb(" Page ",t.start/t.pageSize+1," ")),i.kc(10),i.fc("disabled",c)}},directives:[c.l,c.k],pipes:[c.b,c.o,c.p,c.d],styles:[".products[_ngcontent-%COMP%]{margin:0;list-style-type:none;padding:0}.products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{cursor:pointer;position:relative;left:0;background-color:#eee;margin:.5em;padding:.3em 0;height:1.6em;border-radius:4px}.products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#607d8b;background-color:#ff0;left:.1em}.products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .name[_ngcontent-%COMP%], .products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover   .price[_ngcontent-%COMP%]{color:#607d8b;background-color:#ffd800;left:.1em}.products[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]{background-color:#0094ff;color:#fff}.products[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]:hover{color:#fff}.products[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%], .products[_ngcontent-%COMP%]   li.selected[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{background-color:#0026ff;color:#fff}.products[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{position:relative;top:-3px}.products[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:inline-block;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:1.8em;margin-right:.8em;border-radius:4px 0 0 4px;width:30%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.products[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{float:right;width:15%;font-size:small;color:#fff;padding:.8em .7em 0;background-color:#607d8b;line-height:1em;position:relative;left:-1px;top:-4px;height:1.8em;margin-left:.8em;border-radius:0 4px 4px 0}.products[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{height:1.8em;display:inline-block;width:40%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.products[_ngcontent-%COMP%]   .discontinued[_ngcontent-%COMP%], .products[_ngcontent-%COMP%]   .discontinued[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{color:red!important}"]});var R=n("s7LF");const J=["noproduct",""],L=[4,"ngIf","ngIfElse"];function q(e,t){1&e&&(i.Qb(0,"h2"),i.oc(1,"NO PRODUCT TO DISPLAY"),i.Kb())}const H=["style","float:right","width","250",3,"src",4,"ngIf"],Z=["type","number",3,"ngModel","disabled","ngModelChange"],ee=["type","checkbox",3,"ngModel","ngModelChange"],te=["width","250",2,"float","right",3,"src"];function ne(e,t){if(1&e&&i.Hb(0,"img",te),2&e){const e=i.ac(2);i.kc(0),i.fc("src",e.product.imageUrl,i.jc)}}function ie(e,t){if(1&e){const e=i.Tb();i.Qb(0,"div"),i.Qb(1,"h2"),i.oc(2),i.bc(3,"uppercase"),i.Kb(),i.mc(4,ne,1,1,"img",H),i.Qb(5,"h3"),i.oc(6),i.Kb(),i.Qb(7,"p"),i.oc(8),i.bc(9,"currency"),i.Kb(),i.Qb(10,"p"),i.oc(11," Edit Price: "),i.Qb(12,"input",Z),i.Yb("ngModelChange",function(t){return i.ic(e),i.ac().product.price=t}),i.Kb(),i.Kb(),i.Qb(13,"p"),i.oc(14,"Fixed price? "),i.Qb(15,"input",ee),i.Yb("ngModelChange",function(t){return i.ic(e),i.ac().product.fixedPrice=t}),i.Kb(),i.Kb(),i.Qb(16,"p"),i.oc(17,"Discontinued? "),i.Qb(18,"input",ee),i.Yb("ngModelChange",function(t){return i.ic(e),i.ac().product.discontinued=t}),i.Kb(),i.Kb(),i.Qb(19,"p"),i.oc(20),i.bc(21,"date"),i.Kb(),i.Kb()}if(2&e){const e=i.ac();i.kc(2),i.pc(2,i.Xb("",i.cc(3,9,e.product.name),"")),i.kc(4),i.fc("ngIf",e.product.imageUrl),i.kc(6),i.pc(6,i.Xb("",e.product.description,"")),i.kc(8),i.pc(8,i.Xb("Price: ",i.ec(9,11,e.product.price,"CAD","symbol-narrow",".2"),"")),i.kc(12),i.fc("ngModel",e.product.price),i.fc("disabled",e.product.fixedPrice),i.kc(15),i.fc("ngModel",e.product.fixedPrice),i.kc(18),i.fc("ngModel",e.product.discontinued),i.kc(20),i.pc(20,i.Xb("Modified date: ",i.cc(21,16,e.product.modifiedDate),""))}}class ce{constructor(e,t){this.route=e,this.productService=t}ngOnInit(){let e=+this.route.snapshot.params.id;e&&this.productService.getProductById(e).subscribe(e=>this.product=e)}}ce.ngComponentDef=i.Ab({type:ce,selectors:[["app-product-detail"]],factory:function(e){return new(e||ce)(i.Gb(s.a),i.Gb(K))},consts:3,vars:2,template:function(e,t){if(1&e&&(i.mc(0,q,2,0,"ng-template",null,J,i.nc),i.mc(2,ie,22,18,"div",L)),2&e){const e=i.hc(1);i.kc(2),i.fc("ngIf",t.product),i.fc("ngIfElse",e)}},directives:[c.l,R.f,R.b,R.d,R.e,R.a],pipes:[c.p,c.d,c.f],styles:[""]});const se=[{path:"",component:B},{path:":id",component:ce}];class re{}re.ngModuleDef=i.Eb({type:re}),re.ngInjectorDef=i.Db({factory:function(e){return new(e||re)},imports:[[s.e.forChild(se)],s.e]}),s.e.forChild(se),n.d(t,"ProductsModule",function(){return oe});class oe{}oe.ngModuleDef=i.Eb({type:oe}),oe.ngInjectorDef=i.Db({factory:function(e){return new(e||oe)},imports:[[c.c,R.c,re]]})}}]);